/*! pushbroom.c0 0.0.1 */
!async function(e,t,n){const o=e.location;let r;n="{"===n[0]?"analytics."+o.hostname:n;const s=e.navigator;if(s.userAgent.search(/(bot|spider|crawl)/gi)>-1)return;const i="disablePushbroom",a="addEventListener",c="pushState",l="sendBeacon",d="localStorage",u="Pushbroom is",h=["unblocked","blocked"],v="data-pushbroom-event",m=console.log,p=t=>{let n=parseFloat(e[d].getItem(h[1]));return n&&t&&m(u+" blocked on "+o.hostname+" - Use pushbroom.blockMe(0) to unblock"),n},b=(e,t)=>{if(p(t))return new Promise((e=>e()));const n=new XMLHttpRequest;return new Promise(((t,o)=>{n.onreadystatechange=()=>{4===n.readyState&&t(n.response)},n.open("GET",e),n.send()}))},y=e.screen,f="http://"+n,w=()=>Date.now(),g=()=>$+=w()-S,E=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),k=(e,t)=>{if(!p())return s[l]?void s[l](e,JSON.stringify(t)):b(`${e}?${E(t)}`)};let P,S,$,A;const I=async()=>{if(e[i])return void delete e[i];delete e[i],P=w(),S=P,$=0,A={r:t.referrer,w:y.width,p:o.href},A.r?A.r=A.r:A.r=r;let n=o.hostname;o.pathname;await Promise.all([b(f+"/cache?"+n).then((e=>{console.log(e),A.u=e}))]),r=A.p,b(f+"/hello?"+E(A),!0).then((t=>{e.vid=t}))};t[a]("visibilitychange",(()=>{t.hidden?g():S=w()}));const L=async()=>{e[i]||(!t.hidden&&g(),await k(f+"/duration",{d:$,v:vid}))};e[a]("beforeunload",L);e.history[c]=function(t){let n=history[t];return function(){let o,r=n.apply(this,arguments);return"function"==typeof Event?o=new Event(t):(o=doc.createEvent("Event"),o.initEvent(t,!0,!0)),o.arguments=arguments,e.dispatchEvent(o),r}}(c),e[a](c,(()=>{L(),I()}));let M=e=>pushbroom.event(e.target.getAttribute(v));e.pushbroom={async event(e,t){g();const n={e:e,v:vid,d:$};await k(f+"/event",n),t&&t()},initEvents(){t.querySelectorAll("["+v+"]").forEach((e=>{e.removeEventListener("click",M),e[a]("click",M)}))},blockMe(t){t=t?1:0,e[d].setItem(h[1],t),m(u+" now "+h[t]+" on "+o.hostname)}},I(),pushbroom.initEvents()}(window,document,"{{.Host}}");