/*! pushbroom.c0 0.0.1 */
!async function(e,t,n){const o=e.location;let r;n="{"===n[0]?"localhost:5174":n;const s=e.navigator;if(s.userAgent.search(/(bot|spider|crawl)/gi)>-1)return;const a="disablePushbroom",i="addEventListener",c="pushState",l="sendBeacon",h="localStorage",u="Pushbroom is",d=["unblocked","blocked"],p="data-pushbroom-event",m=console.log,v=t=>{let n=parseFloat(e[h].getItem(d[1]));return n&&t&&m(u+" blocked on "+o.hostname+" - Use pushbroom.blockMe(0) to unblock"),n},b=(e,t)=>{if(v(t))return new Promise((e=>e()));const n=new XMLHttpRequest;return new Promise(((t,o)=>{n.onreadystatechange=()=>{4===n.readyState&&t(parseFloat(n.response))},n.open("GET",e),n.send()}))},f=e.screen,g="http://"+n,w=()=>Date.now(),y=()=>S+=w()-P,E=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&");let k,P,S,$;const A=async()=>{if(e[a])return void delete e[a];delete e[a],k=w(),P=k,S=0,$={r:t.referrer,w:f.width,p:o.href},$.r?$.r=$.r:$.r=r;let n=o.hostname;o.pathname;await Promise.all([b(g+"/cache?"+n).then((e=>{console.log(e),$.u=e}))]),r=$.p,b(g+"/hello?"+E($),!0)};t[i]("visibilitychange",(()=>{t.hidden?y():P=w()}));e.history[c]=function(t){let n=history[t];return function(){let o,r=n.apply(this,arguments);return"function"==typeof Event?o=new Event(t):(o=doc.createEvent("Event"),o.initEvent(t,!0,!0)),o.arguments=arguments,e.dispatchEvent(o),r}}(c),e[i](c,(()=>{A()}));let I=e=>pushbroom.event(e.target.getAttribute(p));e.pushbroom={async event(e,t){y();const n={e:e,p:o.href,d:S,n:k};await((e,t)=>{if(!v())return s[l]?void s[l](e,JSON.stringify(t)):b(`${e}?${E(t)}`)})(g+"/event",n),t&&t()},initEvents(){t.querySelectorAll("["+p+"]").forEach((e=>{e.removeEventListener("click",I),e[i]("click",I)}))},blockMe(t){t=t?1:0,e[h].setItem(d[1],t),m(u+" now "+d[t]+" on "+o.hostname)}},A(),pushbroom.initEvents()}(window,document,"{{.Host}}");