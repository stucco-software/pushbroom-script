/*! pushbroom.c0 0.0.1 */
!async function(e,t,n){const o=e.location;n="{"===n[0]?"analytics."+o.hostname:n,console.log(n);const r=e.navigator;if(r.userAgent.search(/(bot|spider|crawl)/gi)>-1)return;const s="disablePushbroom",a="addEventListener",i="/cache?",c="pushState",l="sendBeacon",d="timing",h="localStorage",u="Pushbroom is",m=["unblocked","blocked"],p="data-pushbroom-event",v=console.log,b=t=>{let n=parseFloat(e[h].getItem(m[1]));return n&&t&&v(u+" blocked on "+o.hostname+" - Use pushbroom.blockMe(0) to unblock"),n},f=(e,t)=>{if(b(t))return new Promise((e=>e()));const n=new XMLHttpRequest;return new Promise(((t,o)=>{n.onreadystatechange=()=>{4===n.readyState&&t(parseFloat(n.response))},n.open("GET",e),n.send()}))},g=e.performance,y=e.screen,w="https://"+n,E=()=>Date.now(),k=()=>A+=E()-$,S=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),P=(e,t)=>{if(!b())return r[l]?void r[l](e,JSON.stringify(t)):f(`${e}?${S(t)}`)};let L,$,A,I;const M=async()=>{if(e[s])return void delete e[s];delete e[s],L=E(),$=L,A=0;let n=g&&g[d]?g[d].domContentLoadedEventEnd-g[d].navigationStart:0;I={r:t.referrer,w:y.width,s:0,t:n>0?n:0,p:o.href};let r=o.hostname,a=o.pathname;await Promise.all([f(w+i+r).then((e=>{I.u=e})),f(w+i+r+a).then((e=>{I.up=e}))]),f(w+"/hello?"+S(I),!0)};t[a]("visibilitychange",(()=>{t.hidden?k():$=E()}));const j=async()=>{e[s]||(!t.hidden&&k(),await P(w+"/duration",{d:A,n:L,p:o.href}))};e[a]("beforeunload",j);e.history[c]=function(t){let n=history[t];return function(){let o,r=n.apply(this,arguments);return"function"==typeof Event?o=new Event(t):(o=doc.createEvent("Event"),o.initEvent(t,!0,!0)),o.arguments=arguments,e.dispatchEvent(o),r}}(c),e[a](c,(()=>{j(),M()}));let q=e=>pushbroom.event(e.target.getAttribute(p));e.pushbroom={async event(e,t){k();const n={e:e,p:o.href,d:A,n:L};await P(w+"/event",n),t&&t()},initEvents(){t.querySelectorAll("["+p+"]").forEach((e=>{e.removeEventListener("click",q),e[a]("click",q)}))},blockMe(t){t=t?1:0,e[h].setItem(m[1],t),v(u+" now "+m[t]+" on "+o.hostname)}},M(),pushbroom.initEvents()}(window,document,"{{.Host}}");